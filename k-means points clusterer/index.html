<html lang="en" xmlns:m="http://www.w3.org/1998/Math/MathML">

<head>
    <meta charset="utf-8">

    <link rel="stylesheet" href="https://rawgithub.com/yannickulrich/presenter/master/lib/jqMath/UnifrakturMaguntia.css">
    <link rel="stylesheet" href="https://rawgithub.com/yannickulrich/presenter/master/lib/jqMath/jqmath-0.4.0.css">

    <script src="http://code.jquery.com/jquery-1.4.3.min.js"></script>
    <script src="https://rawgithub.com/yannickulrich/presenter/master/lib/jqMath/jqmath-etc-0.4.0.min.js"></script>

    <style>
        div {
            position: absolute;
        }
        
        line {
            stroke-width: .4px;
        }
        
        #stats-table {
            width: 460px;
            border: none;
            left: 0px;
        }
    </style>
</head>

<body>

    <div id="graph"></div>

    <div id="controls">
        <button onclick="step();">Step</button>
        <button onclick="changeK(1);">Increase K</button>
        <button onclick="changeK(-1);">Decrease K</button>
        <button onclick="download();">Download</button>

        <table id="stats-table">
            <tr>
                <td>
                    $∣ \{ x_i : {{x_i}^{t-1}∈c_k , {x_i}^{t}∉c_k } \} ∣$
                </td>
                <td>
                    $∑↙{k=1}↖K ∑↙{x_i∈c_k} {‖ x_i - μ_k ‖^2}$
                </td>
                <!--
      <td>
        $\ov{(m_i-x)}∣x∈S_i$
      </td>
      <td>
        $\ov{(m_i-m_j)}$
      </td>
      -->
            </tr>
        </table>
    </div>

    <script src="http://rawgithub.com/jbeuckm/K-Means/master/build/kmeans.min.js"></script>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script>
    <script>
        var ranges = [
            [50, 60],
            [0, 60]
        ];

        var points = [
            [52.35485705, 4.911379453],
            [52.34767817, 4.915402177],
            [52.3723925, 4.897606402],
            [52.35755597, 4.908242906],
            [52.35827347, 4.908607773],
            [52.37107222, 4.89858293],
            [52.36934766, 4.899194007],
            [52.35890048, 4.908102744],
            [52.36117461, 4.904314024],
            [52.35845682, 4.907290558],
            [52.37169014, 4.897871247],
            [52.37230607, 4.898495356],
            [52.35884515, 4.912593745],
            [52.36339906, 4.905450741],
            [52.36937986, 4.903722877],
            [52.35789126, 4.908365807],
            [52.35839044, 4.913308123],
            [52.34618695, 4.912143012],
            [52.35086187, 4.91213605],
            [52.3579547, 4.906011089],
            [52.35834366, 4.90747877],
            [52.3528056, 4.918823233],
            [52.36151498, 4.910923235],
            [52.35703598, 4.909891284],
            [52.36466428, 4.900352622],
            [52.36669443, 4.904295141],
            [52.35842572, 4.909505236],
            [52.35835659, 4.909064998],
            [52.35581177, 4.907186686],
            [52.36229679, 4.904921021],
            [52.37008875, 4.899171419],
            [52.34902573, 4.91276388],
            [52.37011966, 4.905835407],
            [52.35864746, 4.908649238],
            [52.36187076, 4.907404178],
            [52.37147758, 4.901715819],
            [52.36939207, 4.905196822],
            [52.36932782, 4.90206389],
            [52.37334317, 4.901969333],
            [52.35304596, 4.907460207],
            [52.35701244, 4.907781955],
            [52.36919646, 4.903986502],
            [52.37250865, 4.898769982],
            [52.36240331, 4.911159141],
            [52.36402386, 4.903912799],
            [52.36966622, 4.897765652],
            [52.35843145, 4.907640893],
            [52.37342974, 4.89972747],
            [52.36333522, 4.907188853],
            [52.35920432, 4.912681391],
            [52.35582155, 4.908073831],
            [52.35000559, 4.91363803],
            [52.35458777, 4.908418668],
            [52.35220122, 4.913534119],
            [52.35537161, 4.907522662],
            [52.35033342, 4.919590687],
            [52.3578717, 4.906351336],
            [52.3509611, 4.919102432],
            [52.37104853, 4.899635686],
            [52.35344333, 4.909581216],
            [52.36101706, 4.910561087],
            [52.36221472, 4.909051958],
            [52.36834107, 4.897863337],
            [52.36411827, 4.903859975],
            [52.36779444, 4.899065969],
            [52.35822423, 4.912991464],
            [52.35693896, 4.907189496],
            [52.36330493, 4.906960493],
            [52.36427803, 4.900554831],
            [52.36354346, 4.900421353],
            [52.34572127, 4.920280193],
            [52.36172114, 4.90949053],
            [52.35542232, 4.911597329],
            [52.3651101, 4.906056909],
            [52.34810909, 4.922627638],
            [52.35146793, 4.909990291],
            [52.35033388, 4.914007766],
            [52.37218578, 4.90032181],
            [52.34510127, 4.912086695],
            [52.36225272, 4.90952641],
            [52.35215375, 4.911609832],
            [52.36695436, 4.902359685],
            [52.35418695, 4.911611079],
            [52.36914447, 4.897884848],
            [52.35495435, 4.908938522],
            [52.35852858, 4.90777416],
            [52.36043476, 4.903283918],
            [52.35252345, 4.916979086],
            [52.3698597, 4.904750551],
            [52.37209773, 4.89988626],
            [52.36768241, 4.89765805],
            [52.35260583, 4.910823633],
            [52.35375961, 4.915554905],
            [52.36969786, 4.904798345],
            [52.36866298, 4.897859922],
            [52.35220362, 4.920151154],
            [52.36203181, 4.91050456],
            [52.37255858, 4.900276022],
            [52.35252706, 4.918827079],
            [52.35947042, 4.912186416],
            [52.37268236, 4.900217392],
            [52.35672781, 4.90918578],
            [52.35351062, 4.915493851],
            [52.35121762, 4.914388787],
            [52.3635655, 4.90147848],
            [52.3529324, 4.907024532],
            [52.35640442, 4.909483919],
            [52.3693998, 4.90048226],
            [52.35068502, 4.91708054],
            [52.37103435, 4.901116373],
            [52.3736371, 4.898708155],
            [52.3703729, 4.899213077],
            [52.35713667, 4.911658204],
            [52.35232175, 4.916900895],
            [52.36152038, 4.905935397],
            [52.35757938, 4.907928254],
            [52.3650631, 4.900226429],
            [52.36333149, 4.904143341],
            [52.35563332, 4.908439287],
            [52.36005773, 4.908412948],
            [52.3494489, 4.91406378],
            [52.35666529, 4.908334024],
            [52.35241992, 4.919258015],
            [52.35695033, 4.911761866],
            [52.35815508, 4.906723219],
            [52.37293275, 4.902432357],
            [52.37359074, 4.89837569],
            [52.35359434, 4.906506808],
            [52.35036883, 4.914812125],
            [52.35022113, 4.913199923],
            [52.34522585, 4.912393471],
            [52.37165079, 4.901609423],
            [52.35597918, 4.910053438],
            [52.36185212, 4.909747692],
            [52.35040719, 4.914567552],
            [52.3508273, 4.914802114],
            [52.36445413, 4.902241054],
            [52.35410372, 4.909973252],
            [52.3587619, 4.909940936],
            [52.37381438, 4.898703494],
            [52.37356026, 4.899380826],
            [52.37232115, 4.898786136],
            [52.35253484, 4.918475269],
            [52.35175481, 4.911129383],
            [52.34459489, 4.916672893],
            [52.37189232, 4.897666336],
            [52.37149304, 4.898219502],
            [52.36172471, 4.906923537],
            [52.34314854, 4.917003297],
            [52.36143556, 4.909648135],
            [52.35412603, 4.907602318],
            [52.36156221, 4.906536232],
            [52.36482865, 4.90730006],
            [52.36344429, 4.907905815],
            [52.34976135, 4.913542277],
            [52.36166876, 4.910744627],
            [52.37220558, 4.900818158],
            [52.37340662, 4.900022072],
            [52.37281116, 4.900927824],
            [52.36407828, 4.9081577],
            [52.35223293, 4.917712515],
            [52.34988705, 4.917983866],
            [52.37382512, 4.90048886],
            [52.36724867, 4.901879089],
            [52.35669402, 4.907155217],
            [52.361556, 4.911516759],
            [52.36467529, 4.90755958],
            [52.36185922, 4.909806312],
            [52.34926554, 4.91369343],
            [52.34938799, 4.912548742],
            [52.36931478, 4.898140866],
            [52.35901325, 4.913529541],
            [52.37293059, 4.899237334],
            [52.36205831, 4.909689063],
            [52.36266808, 4.911460091],
            [52.36106584, 4.909553959],
            [52.37124996, 4.897598725],
            [52.37277275, 4.8975981],
            [52.35709596, 4.907536219],
            [52.34608242, 4.914490028],
            [52.37339184, 4.90244395],
            [52.37140571, 4.902242641],
            [52.36311894, 4.911115879],
            [52.37375384, 4.898403204],
            [52.37339626, 4.898427175],
            [52.35740445, 4.911257405],
            [52.37334637, 4.89834384],
            [52.3735894, 4.897282518],
            [52.35498034, 4.907750007],
            [52.36393862, 4.905375753],
            [52.35362474, 4.91314614],
            [52.37216774, 4.899789222],
            [52.35572868, 4.911066192],
            [52.3577303, 4.909650715],
            [52.36589791, 4.907513893],
            [52.35716998, 4.90815392],
            [52.37325592, 4.897337265],
            [52.35710408, 4.911731129],
            [52.35381401, 4.914569631],
            [52.37070349, 4.897673204],
            [52.36228739, 4.911368292],
            [52.34994875, 4.912196085],
            [52.34945388, 4.918242391],
            [52.37326076, 4.898611929],
            [52.36349747, 4.905659817],
            [52.37354714, 4.898366141],
            [52.3622023, 4.909793468],
            [52.35548388, 4.910690376],
            [52.36229074, 4.909879763],
            [52.36208198, 4.90400353],
            [52.35595869, 4.912925669],
            [52.36454934, 4.907313744],
            [52.36913689, 4.903716177],
            [52.37139064, 4.90197472],
            [52.35091019, 4.913420799],
            [52.3454559, 4.91483954],
            [52.35958549, 4.914162064],
            [52.35758682, 4.912887775],
            [52.37088033, 4.899925076],
            [52.37286605, 4.902951031],
            [52.37360644, 4.899327187],
            [52.36188682, 4.907725937],
            [52.37078775, 4.900231473],
            [52.35393175, 4.909703841],
            [52.36508999, 4.904258142],
            [52.35755782, 4.90779481],
            [52.36782106, 4.8974062],
            [52.37219244, 4.90233866],
            [52.34449692, 4.915570828],
            [52.37312387, 4.900905942],
            [52.36133783, 4.908464524],
            [52.36527331, 4.901425302],
            [52.368351, 4.897641734],
            [52.36436709, 4.907445723],
            [52.37021885, 4.904299155],
            [52.35987604, 4.910904232],
            [52.36393163, 4.906677751],
            [52.36433125, 4.906446067],
            [52.34901358, 4.920128543],
            [52.35628944, 4.91076978],
            [52.35734021, 4.911785755],
            [52.36474753, 4.903999292],
            [52.35885269, 4.912091419],
            [52.35409351, 4.909709499],
            [52.35571332, 4.913749699],
            [52.36985602, 4.90173902],
            [52.36464963, 4.906261585],
            [52.37062076, 4.899213975],
            [52.36579707, 4.905806869],
            [52.36231912, 4.905018181],
            [52.35923303, 4.91143495],
            [52.36479733, 4.908598285],
            [52.37379736, 4.897627792],
            [52.35240795, 4.912502096],
            [52.35339, 4.911118783],
            [52.3702489, 4.903875691],
            [52.36180499, 4.908716926],
            [52.3577118, 4.906761172],
            [52.36111942, 4.904833607],
            [52.36328295, 4.907867893],
            [52.3631427, 4.905926631],
            [52.36967038, 4.900045391],
            [52.36358574, 4.905894624],
            [52.35354518, 4.906123409],
            [52.36772155, 4.902781439],
            [52.36551721, 4.90782495],
            [52.35176479, 4.912337614],
            [52.35342526, 4.913923057],
            [52.35065416, 4.91348963],
            [52.35190949, 4.918192982],
            [52.36063498, 4.906483171],
            [52.35839652, 4.906161351],
            [52.35698535, 4.909966105],
            [52.3628032, 4.904194505],
            [52.37117227, 4.900137795],
            [52.35361729, 4.910853319],
            [52.35772319, 4.906555829],
            [52.35111547, 4.915617995],
            [52.35812271, 4.909109092],
            [52.35935311, 4.913219941],
            [52.36823911, 4.897995883],
            [52.36479701, 4.903777143],
            [52.35486797, 4.913827055],
            [52.36502874, 4.908183429],
            [52.35225155, 4.915743459],
            [52.35360751, 4.906519113],
            [52.35774873, 4.912486965],
            [52.37101982, 4.902456739],
            [52.3735613, 4.897812603],
            [52.36168549, 4.911163669],
            [52.3733782, 4.897758465],
            [52.35536051, 4.908519561],
            [52.35562436, 4.909294638],
            [52.36293066, 4.907379088],
            [52.37124711, 4.897480178],
            [52.35230516, 4.915069887],
            [52.35122676, 4.917523058],
            [52.37038148, 4.89989943],
            [52.35901373, 4.914242137],
            [52.36216172, 4.905560541],
            [52.36401753, 4.900231538],
            [52.35883367, 4.913346781],
            [52.37201402, 4.897862116],
            [52.36526818, 4.901350495],
            [52.35252196, 4.910977587],
            [52.36773132, 4.903854588],
            [52.35315901, 4.916506271],
            [52.37254882, 4.897604978],
            [52.359034, 4.913923243],
            [52.37281288, 4.902220142],
            [52.3644591, 4.908337585],
            [52.35351193, 4.916622063],
            [52.36513247, 4.908371799],
            [52.34953111, 4.91474048],
            [52.35219808, 4.910040033],
            [52.36309547, 4.904713045],
            [52.36292046, 4.904538473],
            [52.34660797, 4.913084082],
            [52.3424936, 4.915040301],
            [52.35354297, 4.913366804],
            [52.35091302, 4.912646757],
            [52.36275942, 4.911489591],
            [52.35298389, 4.907670669],
            [52.35278647, 4.912563881],
            [52.35269084, 4.913074267],
            [52.35704468, 4.912126293],
            [52.36441538, 4.900877227],
            [52.3736205, 4.900682415],
            [52.35712106, 4.907509548],
            [52.3532546, 4.911468281],
            [52.36087626, 4.909811025],
            [52.35267938, 4.911893105],
            [52.36850421, 4.897364316],
            [52.35723557, 4.907036705],
            [52.36325836, 4.908473002],
            [52.35175955, 4.911594753],
            [52.36304116, 4.909077791],
            [52.35846551, 4.912372668],
            [52.36713701, 4.897525999],
            [52.36421599, 4.907679754],
            [52.35784336, 4.908651106],
            [52.36517405, 4.907708344],
            [52.35429636, 4.9124601],
            [52.36518803, 4.906281534],
            [52.35284651, 4.915517566],
            [52.36189131, 4.904575877],
            [52.35554592, 4.906191203],
            [52.36197645, 4.905447473],
            [52.35306969, 4.907642675],
            [52.36121817, 4.909409268],
            [52.35020614, 4.91456643],
            [52.35210015, 4.914702081],
            [52.37299109, 4.900962613],
            [52.37152703, 4.897809238],
            [52.35898737, 4.906447445],
            [52.36188062, 4.909435945],
            [52.34595819, 4.921402399],
            [52.35323812, 4.917103241],
            [52.35092038, 4.915145543],
            [52.35549015, 4.908523997],
            [52.3474121, 4.914452718],
            [52.37230611, 4.897556865],
            [52.35825565, 4.914060108],
            [52.3513519, 4.917794286],
            [52.3573967, 4.908680546],
            [52.35412181, 4.906827023],
            [52.3628738, 4.910151985],
            [52.34456405, 4.915373485],
            [52.35613217, 4.908206074],
            [52.36430152, 4.905423278],
            [52.36357441, 4.908515791],
            [52.36259764, 4.911463728],
            [52.35036993, 4.912314041],
            [52.35065514, 4.912990618],
            [52.35809611, 4.911747154],
            [52.36431424, 4.900166229],
            [52.35389895, 4.906017757],
            [52.35150923, 4.918785076],
            [52.35466251, 4.907630216],
            [52.35597146, 4.910866477],
            [52.36319216, 4.908839993],
            [52.35568278, 4.912839444],
            [52.36399314, 4.907800465],
            [52.3571775, 4.908668011],
            [52.35684292, 4.908726511],
            [52.35622811, 4.907176991],
            [52.36469512, 4.907600212],
            [52.35980168, 4.913326053],
            [52.35889461, 4.907738013],
            [52.3531952, 4.912161993],
            [52.35851623, 4.91339963],
            [52.36832053, 4.90230477],
            [52.36011643, 4.903423337],
            [52.34779103, 4.917231396],
            [52.36748548, 4.902017104],
            [52.35181541, 4.914881156],
            [52.36153273, 4.906243854],
            [52.34937212, 4.913947335],
            [52.36091318, 4.905781284],
            [52.34896871, 4.913419787],
            [52.36210134, 4.905578746],
            [52.36468327, 4.900836182],
            [52.35721749, 4.907179567],
            [52.35492669, 4.91044994],
            [52.36632409, 4.907446095],
            [52.35778952, 4.908086231],
            [52.36677406, 4.903735805],
            [52.37051362, 4.902550046],
            [52.36695986, 4.902812518],
            [52.36203333, 4.909155907],
            [52.37132726, 4.900176083],
            [52.35378107, 4.912251334],
            [52.35649658, 4.912825769],
            [52.35283334, 4.907929045],
            [52.3546577, 4.909981886],
            [52.35394513, 4.907044917],
            [52.35253899, 4.911827641],
            [52.36322105, 4.907931687],
            [52.37007374, 4.901695876],
            [52.36468519, 4.90413631],
            [52.3701618, 4.90013758],
            [52.37131183, 4.899930663],
            [52.35708912, 4.907156302],
            [52.35182707, 4.911934069],
            [52.35643227, 4.906747019],
            [52.35008627, 4.914006462],
            [52.35732886, 4.908592689],
            [52.35620756, 4.90936531],
            [52.35141414, 4.909383491],
            [52.36595545, 4.905837354],
            [52.355425, 4.907477062],
            [52.37317271, 4.899467337],
            [52.3518723, 4.914132677],
            [52.36470577, 4.905359494],
            [52.36925119, 4.899513889],
            [52.36321755, 4.906643512],
            [52.35408511, 4.912887311],
            [52.35406603, 4.909683318],
            [52.3586804, 4.914355115],
            [52.35569862, 4.909101457],
            [52.3731528, 4.898146019],
            [52.36323441, 4.90588342],
            [52.35557581, 4.909170176],
            [52.35314792, 4.912763735],
            [52.36557579, 4.902317773],
            [52.35713895, 4.9133915],
            [52.3491099, 4.913571748],
            [52.35332665, 4.909925286],
            [52.37232633, 4.90058576],
            [52.35233467, 4.913333633],
            [52.37387074, 4.89915719],
            [52.36778709, 4.897265417],
            [52.35734632, 4.912887429],
            [52.3515113, 4.915805711],
            [52.3509104, 4.917477469],
            [52.35685025, 4.913909452],
            [52.37238189, 4.901308572],
            [52.35981449, 4.913209662],
            [52.35957928, 4.910970875],
            [52.35242453, 4.912487075],
            [52.35051177, 4.912566672],
            [52.36309295, 4.910534088],
            [52.36803799, 4.900244339],
            [52.36836517, 4.900664655],
            [52.36692174, 4.900655626],
            [52.36265828, 4.909767079],
            [52.36899966, 4.89995655],
            [52.36820254, 4.900416158],
            [52.35569363, 4.908114779],
            [52.36121973, 4.911068794],
            [52.36746063, 4.902868186],
            [52.36841818, 4.9014162],
            [52.36983764, 4.901120717],
            [52.3549384, 4.911987828],
            [52.35596426, 4.912443204],
            [52.3711108, 4.898503346],
            [52.35975194, 4.911588292],
            [52.34682206, 4.911599832],
            [52.35466034, 4.913643196],
            [52.37361177, 4.898569679],
            [52.35797251, 4.911297188],
            [52.34747914, 4.913840226],
            [52.35074826, 4.91868629],
            [52.34853991, 4.918960615],
            [52.37185509, 4.898837966],
            [52.37225527, 4.901909575],
            [52.35699898, 4.907142971],
            [52.3587201, 4.9090401],
            [52.35199173, 4.913682191],
            [52.36707097, 4.901829001],
            [52.35835942, 4.912474448],
            [52.37075944, 4.90294715],
            [52.3536532, 4.912269995],
            [52.3726137, 4.899965145],
            [52.35450512, 4.916436895],
            [52.37018651, 4.900898771],
            [52.36720204, 4.902946093],
            [52.36217008, 4.903927119],
            [52.36518667, 4.907411248],
            [52.36117454, 4.906143223],
            [52.36177563, 4.908615201],
            [52.36353941, 4.903418493],
            [52.3508986, 4.913091006],
            [52.36400755, 4.90125582],
            [52.36783613, 4.904006222],
            [52.35125992, 4.915255989],
            [52.35562187, 4.910715467],
            [52.36905638, 4.899475708],
            [52.37267636, 4.898817186],
            [52.36732293, 4.901151722],
            [52.3566005, 4.91062427],
            [52.35277165, 4.910312713],
            [52.36465545, 4.901943063],
            [52.35879566, 4.912207357],
            [52.35637065, 4.911582997],
            [52.35821108, 4.913065241],
            [52.36484383, 4.905477187],
            [52.36034517, 4.906070258],
            [52.37248603, 4.90290217],
            [52.36785984, 4.897798896],
            [52.35078117, 4.913176665],
            [52.35920364, 4.913793715],
            [52.35673252, 4.909588411],
            [52.35594187, 4.90921666],
            [52.37190311, 4.901477726],
            [52.35031511, 4.912321448],
            [52.37198675, 4.901997893],
            [52.35045235, 4.916140149],
            [52.35291353, 4.908862984],
            [52.36253847, 4.909377605],
            [52.36307031, 4.907316315],
            [52.35579504, 4.909906968],
            [52.35434214, 4.909902472],
            [52.36642938, 4.906143045],
            [52.35055789, 4.913497508],
            [52.35017497, 4.914447262],
            [52.35200308, 4.914923824],
            [52.35728196, 4.907525105],
            [52.363716, 4.905484072],
            [52.35793607, 4.912376129],
            [52.35631951, 4.909184002],
            [52.35832049, 4.913332152],
            [52.36358342, 4.908562622],
            [52.36963298, 4.898131586],
            [52.35213352, 4.911097864],
            [52.36710912, 4.904484956],
            [52.35642034, 4.913260101],
            [52.35934225, 4.912394022],
            [52.35682579, 4.907516894],
            [52.35226129, 4.911301687],
            [52.35437454, 4.90904625],
            [52.37385057, 4.899391394],
            [52.36497085, 4.902942021],
            [52.3652196, 4.900348135],
            [52.36464203, 4.900632429],
            [52.3457158, 4.91219877],
            [52.35398861, 4.908982088],
            [52.35445957, 4.908906785],
            [52.35070131, 4.912344446],
            [52.37332903, 4.900307469],
            [52.37305402, 4.897405938],
            [52.37071663, 4.900873015],
            [52.35176684, 4.911528939],
            [52.34953326, 4.912959414],
            [52.35220106, 4.917750704],
            [52.36598229, 4.907645295],
            [52.36455494, 4.90370752],
            [52.37304899, 4.902186107],
            [52.36168864, 4.911401842],
            [52.35726581, 4.907187073],
            [52.34995412, 4.913018028],
            [52.35439932, 4.910845741],
            [52.35337335, 4.914871609],
            [52.35234612, 4.910982909],
            [52.36909486, 4.899858786],
            [52.36488241, 4.905478801],
            [52.36946391, 4.898479698],
            [52.36361847, 4.904022136],
            [52.37011704, 4.905725525],
            [52.37264827, 4.902824665],
            [52.37240928, 4.902979631],
            [52.3612266, 4.90882449],
            [52.36767644, 4.898491931],
            [52.35977809, 4.912678278],
            [52.35814059, 4.912286349],
            [52.35879809, 4.908960361],
            [52.35646962, 4.909437611],
            [52.37178089, 4.902918431],
            [52.35618154, 4.908445759],
            [52.36241979, 4.90927763],
            [52.36194939, 4.910774494],
            [52.3635083, 4.903088271],
            [52.37234836, 4.89785441],
            [52.36386961, 4.901459219],
            [52.3559028, 4.911807069],
            [52.35972373, 4.913926123],
            [52.35854141, 4.913644649],
            [52.3565874, 4.913869635],
            [52.35094367, 4.914053853],
            [52.36934093, 4.901371775],
            [52.36446476, 4.903770117],
            [52.35768269, 4.906531605],
            [52.37111589, 4.899458077],
            [52.36130561, 4.910701205],
            [52.36897457, 4.905669681],
            [52.35089385, 4.913477285],
            [52.35045338, 4.914070645],
            [52.3684163, 4.899007504],
            [52.35492416, 4.90914909],
            [52.37356442, 4.899516989],
            [52.35576009, 4.914173599],
            [52.3525217, 4.913426315],
            [52.37028898, 4.897919],
            [52.37267582, 4.897986612],
            [52.36856092, 4.897419548],
            [52.36862508, 4.898316699],
            [52.36692727, 4.900729847],
            [52.36562318, 4.900611227],
            [52.36264641, 4.910946096],
            [52.36229541, 4.911207239],
            [52.36518457, 4.904443961],
            [52.37258909, 4.9007994],
            [52.35499817, 4.909412354],
            [52.34606376, 4.92276174],
            [52.3566792, 4.912814662],
            [52.37260954, 4.897854126],
            [52.35082182, 4.913045787],
            [52.37163317, 4.898482201],
            [52.35703316, 4.907371522],
            [52.34730039, 4.911862217],
            [52.35516836, 4.913892253],
            [52.37160081, 4.902755997],
            [52.36992538, 4.899641374],
            [52.37100121, 4.897575787],
            [52.36838637, 4.90431094],
            [52.35238249, 4.910920106],
            [52.3573236, 4.909437639],
            [52.36997669, 4.901867116],
            [52.37128723, 4.899601513],
            [52.35113898, 4.912277004],
            [52.35709208, 4.91319221],
            [52.36405846, 4.90869731],
            [52.36185753, 4.909980355],
            [52.35566569, 4.910520159],
            [52.35749816, 4.907498228],
            [52.35642504, 4.914061007],
            [52.3539137, 4.913036231],
            [52.37246515, 4.901565661],
            [52.35636835, 4.913355774],
            [52.3442504, 4.91289339],
            [52.35416348, 4.910665847],
            [52.36305673, 4.905886014],
            [52.36380835, 4.902077662],
            [52.35869866, 4.907477166],
            [52.37152604, 4.900069739],
            [52.37036527, 4.898567371],
            [52.35254373, 4.919535617],
            [52.3593467, 4.913040854],
            [52.35038154, 4.912187929],
            [52.35969554, 4.914000891],
            [52.35599808, 4.914087719],
            [52.3503529, 4.913153461],
            [52.36633014, 4.903168432],
            [52.35874886, 4.909706645],
            [52.37193404, 4.902058789],
            [52.35282507, 4.910671955],
            [52.36226059, 4.904550807],
            [52.36249482, 4.906541076],
            [52.3711024, 4.897932426],
            [52.36798599, 4.905464378],
            [52.37068254, 4.898697525],
            [52.35728211, 4.911697761],
            [52.35923544, 4.91393123],
            [52.35254568, 4.919328525],
            [52.36526507, 4.905493665],
            [52.35130245, 4.918520349],
            [52.35778943, 4.910908399],
            [52.35649356, 4.907805052],
            [52.35857624, 4.91327225],
            [52.35835087, 4.912797002],
            [52.37322048, 4.897432061],
            [52.35650249, 4.90888721],
            [52.35589373, 4.90925329],
            [52.35856546, 4.910850404],
            [52.3695335, 4.904901358],
            [52.35930134, 4.910006817],
            [52.36178548, 4.906886101],
            [52.36861352, 4.897435577],
            [52.37202544, 4.899227756],
            [52.35355938, 4.912789644],
            [52.37219831, 4.899528379],
            [52.35634493, 4.913484867],
            [52.35256569, 4.915543976],
            [52.35403294, 4.9134474],
            [52.36384261, 4.900885499],
            [52.34684295, 4.913803376],
            [52.34844862, 4.913975726],
            [52.35263947, 4.914346543],
            [52.34585719, 4.911694164],
            [52.3534532, 4.906695902],
            [52.35466254, 4.910151846],
            [52.35822428, 4.909070177],
            [52.35425063, 4.915582812],
            [52.35285406, 4.913313912],
            [52.36304894, 4.909387193],
            [52.37011226, 4.89736477],
            [52.35438124, 4.91660205],
            [52.34985341, 4.914481333],
            [52.35749541, 4.912317008],
            [52.3599959, 4.906043581],
            [52.35934081, 4.913613707],
            [52.35768669, 4.912456188],
            [52.36396469, 4.900720842],
            [52.35691804, 4.907669078],
            [52.34298322, 4.91531656],
            [52.35595423, 4.90908559],
            [52.37223194, 4.899426188],
            [52.35915911, 4.912626253],
            [52.36173787, 4.904016233],
            [52.35714324, 4.912834817],
            [52.35428159, 4.913174209],
            [52.35975969, 4.911639842],
            [52.35717566, 4.911177431],
            [52.3696978, 4.897843345],
            [52.35411448, 4.906631601],
            [52.3630369, 4.906438521],
            [52.35348594, 4.910389031],
            [52.35624072, 4.911706616],
            [52.35791422, 4.909865172],
            [52.3496835, 4.917407118],
            [52.37103312, 4.899862693],
            [52.36966024, 4.903342097],
            [52.37308836, 4.900214042],
            [52.36481099, 4.900428014],
            [52.37004002, 4.90311025],
            [52.35794296, 4.906883929],
            [52.37213033, 4.899411241],
            [52.36959599, 4.899069358],
            [52.35208577, 4.917758721],
            [52.36422485, 4.902214762],
            [52.36976204, 4.904486928],
            [52.37383347, 4.902704295],
            [52.35496856, 4.909243717],
            [52.35725088, 4.914021322]
        ]

        var lat_min = Infinity;
        var lat_max = -Infinity;
        var lon_min = Infinity;
        var lon_max = -Infinity;
        for (var i = 0; i < points.length; i++) {
            lat_min = points[i][0] < lat_min ? points[i][0] : lat_min;
            lat_max = points[i][0] > lat_max ? points[i][0] : lat_max;

            lon_min = points[i][1] < lon_min ? points[i][1] : lon_min;
            lon_max = points[i][1] > lon_max ? points[i][1] : lon_max;
        }

        //var points = kmeans.generateRandomPoints(ranges, 2);
        var means = [];

        //console.log(points);
        console.log(lat_min);
        console.log(lat_max);
        console.log(lon_min);
        console.log(lon_max);

        var assignments = kmeans.assignPointsToMeans(points, means);

        console.log(assignments);

        var svg = d3.select('#graph').append('svg').attr('width', 960).attr('height', 500);

        var graph = svg.append('g').attr('transform', 'translate(460,0)');
        var meanLayer = graph.append('g');

        var xScale = d3.scale.linear().domain([lat_min, lat_max]).range([0, 500]);
        var yScale = d3.scale.linear().domain([lon_min, lon_max]).range([0, 500]);

        var color = d3.scale.category10();

        function redraw() {

            var pointDots = graph.selectAll('.pointDots').data(points);
            pointDots.enter().append('circle').attr('class', 'pointDots')
                .attr('r', 2)
                .attr('cx', function(d) {
                    return xScale(d[0]);
                })
                .attr('cy', function(d) {
                    return yScale(d[1]);
                });

            var assignmentLines = meanLayer.selectAll('.assignmentLines').data(assignments);
            assignmentLines.enter().append('line').attr('class', 'assignmentLines')
                .attr('x1', function(d, i) {
                    return xScale(points[i][0]);
                })
                .attr('y1', function(d, i) {
                    return yScale(points[i][1]);
                })
                .attr('x2', function(d, i) {
                    return xScale(means[d][0]);
                })
                .attr('y2', function(d, i) {
                    return yScale(means[d][1]);
                })
                .attr('stroke', function(d) {
                    return color(d);
                });

            assignmentLines.transition().duration(500)
                .attr('x2', function(d, i) {
                    return xScale(means[d][0]);
                })
                .attr('y2', function(d, i) {
                    return yScale(means[d][1]);
                })
                .attr('stroke', function(d) {
                    return color(d);
                });

            var meanDots = meanLayer.selectAll('.meanDots').data(means);
            meanDots.enter().append('circle').attr('class', 'meanDots')
                .attr('r', 5)
                .attr('stroke', function(d, i) {
                    return color(i);
                })
                .attr('stroke-width', 3)
                .attr('fill', 'white')
                .attr('cx', function(d) {
                    return xScale(d[0]);
                })
                .attr('cy', function(d) {
                    return yScale(d[1]);
                });
            meanDots.transition().duration(500)
                .attr('cx', function(d) {
                    return xScale(d[0]);
                })
                .attr('cy', function(d) {
                    return yScale(d[1]);
                });
            meanDots.exit().remove();

        }

        changeK(5);
        redraw();


        function step() {

            oldAssignments = assignments;

            kmeans.moveMeansToCenters(points, assignments, means);

            assignments = kmeans.assignPointsToMeans(points, means);

            var changeCount = kmeans.countChangedAssignments(assignments, oldAssignments);

            var aveDistance = kmeans.findAverageDistancePointToMean(points, means, assignments);
            var aveMeanSeparation = kmeans.findAverageMeanSeparation(means);
            var sse = kmeans.sumSquaredError(points, means, assignments);
            
            /*
            var row = d3.select('#stats-table').append('tr');
            row.append('td').html(changeCount);
            row.append('td').html(sse);
            */
            
            redraw();
        }



        function changeK(amt) {
            if (amt > 0) {
                while (amt--) {
                    var i = Math.floor(Math.random() * points.length);

                    var p = points[i];
                    var newPoint = p.slice(0);
                    console.log("adding new point " + newPoint);
                    means.push(newPoint);
                }
            } else
                while (amt < 0) {
                    means.pop();
                    amt++;
                }
            assignments = kmeans.assignPointsToMeans(points, means);
            redraw();
            
            var row = d3.select('#stats-table').append('tr');
            row.append('td').html(means.length);
        }

        function download() {
            var data = assignments;
            
            var csvContent = "data:text/csv;charset=utf-8,";
            
            for(var i =0; i< assignments.length; i++)
                {
                    dataString = [assignments[i],points[i][0],points[i][1]].join(",");
                    csvContent += dataString + "\n";
                }
            
            console.log(csvContent);
            /*
            data.forEach(function(infoArray, index) {
                dataString = infoArray.join(",");
                csvContent += dataString + "\n";
            });
           */

            var encodedUri = encodeURI(csvContent);
            var link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "Data.csv");
            link.click();
            
        }
    </script>
</body>

</html>